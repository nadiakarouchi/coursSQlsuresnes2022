<!DOCTYPE html>
<html lang="fr">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-F3w7mX95PdgyTmZZMECAngseQB83DfGTowi0iMjiWaeVhAn4FJkqJByhZMI3AhiU" crossorigin="anonymous">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
    <!-- MES STYLES -->
    <link rel="stylesheet" href="../coursSQL/css/style.css">
    <title>Cours SQL/ Requêtes </title>

    <!-- Mon code JS est ici placé dans l'en-tête, dans l'élément head de mon fichier, à l'intérieur de la balise script. Ce code récupère l'heure et l'actualise toutes les secondes et nous permet de l'afficher ou de la masquer via un bouton -->
    <!-- JS !!!  ; ouvrez toujours l'inspecteur de votre navigateur et sa console pour avoir les informations sur les scripts -->

</head>

<body>
    <!-- navigation navbar  -->

    <nav class="navbar navbar-light  fixed-top p-2">
        <div class="container-fluid">
            <a class="navbar-brand" href="#">SQL</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasNavbar"
                aria-controls="offcanvasNavbar">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="offcanvas offcanvas-end" tabindex="-1" id="offcanvasNavbar"
                aria-labelledby="offcanvasNavbarLabel">
                <div class="offcanvas-header">
                    <h5 class="offcanvas-title" id="offcanvasNavbarLabel">Index</h5>
                    <button type="button" class="btn-close text-reset" data-bs-dismiss="offcanvas"
                        aria-label="Close"></button>
                </div>
                <div class="offcanvas-body">
                    <ul class="navbar-nav justify-content-end flex-grow-1 pe-3">
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#" id="offcanvasNavbarDropdown" role="button"
                                data-bs-toggle="dropdown" aria-expanded="false">
                                Introduction
                            </a>
                            <ul class="dropdown-menu" aria-labelledby="offcanvasNavbarDropdown">
                                <li><a class="dropdown-item" href="#introduction">Introduction</a></li>
                                <li><a class="dropdown-item" href="#modelisation">Modélisation d'une BDD</a></li>
                                <li><a class="dropdown-item" href="#table">Les tables</a></li>
                                <li><a class="dropdown-item" href="#colonne">Les colonnes ou les champs</a></li>
                                <li><a class="dropdown-item" href="#donnees">Les types de données</a></li>
                                <li><a class="dropdown-item" href="#pk">Type de données PK AI pour les ID</a></li>
                                <li><a class="dropdown-item" href="#cardinalite">Les cardinalités</a></li>
                                <li><a class="dropdown-item" href="#jointure">Table de jointure</a></li>
                                <li><a class="dropdown-item" href="#fk">Clefs étrangères ou Fk</a></li>
                                <li><a class="dropdown-item" href="#enregristrement">Les enregistrements</a></li>
                                <li><a class="dropdown-item" href="#bdd">Interroger la BDD</a></li>

                            </ul>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../coursSQLsuresnes2022/01_requetes.html">01/Requetes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../coursSQlsuresnes2022/">02/Requetes</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../coursSQLsuresnes2022/03_requetes_imbriquees.html">03/Requetes
                                imbriquées</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link" href="../coursSQLsuresnes2022/04_jointure.html">04/Jointure</a>
                        </li>

                    </ul>
                    <form class="d-flex">
                        <input class="form-control me-2" type="search" placeholder="Search" aria-label="Search">
                        <button class="btn btn-outline-success" type="submit">Search</button>
                    </form>
                </div>
            </div>
        </div>
    </nav>
    <!-- fin nav -->
    <div id="carouselExampleSlidesOnly" class="carousel slide container-fluid" data-bs-ride="carousel">
        <div class="carousel-inner">
            <div class="carousel-item active">
                <img src="img/pma.jpg" class="d-block w-75 img-fluid text-center" alt="sql">
            </div>
            <div class="carousel-item">
                <img src="img/sql.jpg" class="d-block w-75 img-fluid text-center" alt="sqlmediaa">
            </div>
            <div class="carousel-item">
                <img src="img/php.jpg" class="d-block w-75 img-fluid text-center" alt="php">
            </div>
        </div>
    </div>
    <!-- fin carousel -->

    <!-- =================================== -->
    <!-- en-tête de la page -->
    <!-- =================================== -->
    <header class="container-fluid ">
        <div class="row">
            <h1 class="display-1 text-center alert alert-info">Cours SQL - requetes - page
                02</h1>
        </div>
    </header>
    <!-- =================================== -->
    <!-- conteneur principal-->
    <!-- =================================== -->
    <section class="container mb-4 bg-light">
        <div class="row m-2 border p-2">
            <div class="col-sm-12">
                <h2 class="text-cente alert alert-primary" id="insertInto">1 - INSERT INTO, requête d'insertion</h2>
                <ul>
                    <li class="alert alert-warning">Pour insérer un enregistrement, 1ème méthode : <br><br>
                        <code
                            class="alert alert-success">INSERT INTO employes (prenom, nom, sexe, service, date_embauche, salaire) VALUES ('Alexis', 'Richy', 'm', 'informatique', '2011-12-28', 1800);</code>
                    </li>

                    <li class="alert alert-warning">Pour voir l'ID d'Alexis, il y a deux façons : <br><br>
                        <code class="alert alert-success">SELECT * FROM employes WHERE prenom='alexis';</code><br><br>
                        ou bien <br> <br>
                        <code
                            class="alert alert-success"> SELECT * FROM employes ORDER BY id_employes DESC LIMIT 1;</code>
                    </li>

                    <li class="alert alert-warning">Pour insérer un enregistrement, 2ème méthode : <br><br>
                        <code
                            class="alert alert-success">INSERT INTO employes VALUES (NULL , 'Jeanne', 'Richy','m','informatique','2012-01-28', 1800)</code>
                    </li>

                    <li class="alert alert-danger">NULL nous permet de laisser le champs id_employes se remplir seul car
                        il est auto-incrémenté. </li>
                </ul>
            </div>
        </div><!-- fin de la rangée -->
        <div class="row m-2 border p-2">
            <div class="col-sm-12">
                <h2 class="text-center alert alert-primary" id="insert">2 - Requête de modification</h2>
            </div>
            <div class="col-sm-12 col-md-6">
                <h3 class="text-center alert alert-primary">a) Maj avec UPDATE</h3>
                <ul>
                    <li class="alert alert-warning">Augmenter le salaire d'un employé :
                        <code class="alert-success">UPDATE employes SET salaire = 1900 WHERE id_employes = 992;</code>
                    </li>

                    <li class="alert alert-danger">On utilise toujours des id pour mettre à jour les informations de la
                        base de donnée car c'est le seul élément unique. </li>

                    <li class="alert alert-warning">Pour faire plusieurs mises à jour en même temps il faudra respecter
                        l'ordre des colonnes et les séparer par une virgule :
                        <code
                            class="alert-success">UPDATE employes SET service='commercial', salaire = 2000 WHERE id_employes = 992;</code>
                    </li>
                </ul>
            </div>
            <div class="col-sm-12 col-md-6">
                <h3 class="text-center alert alert-primary">b) Supprimer avec DELETE</h3>
                <ul>
                    <li class="alert alert-warning">Supprimer l'enregistrement d'un employé avec DELETE :
                        <code class="alert-success">DELETE FROM employes WHERE id_employes=388;</code>
                    </li>

                    <li class="alert alert-warning">Supprimer plusieurs enregistrements avec le code suivant :
                        <code class="alert-success">DELETE FROM employes WHERE service = 'informatique'; </code>ici on
                        supprime toutes les personnes du service informatique.
                    </li>
                </ul>
            </div>
        </div><!-- fin de la rangée -->

        <div class="row m-2 border p-2">
            <div class="col-sm-12">
                <h2 class="text-center alert alert-primary" id="insert">3 - Quelques exercices</h2>
            </div>

            <div class="col-sm-12">
                <ul>
                    <li class="alert alert-warning">Afficher la profession de l'employé 547 : <code
                            class="alert alert-success">SELECT service FROM employes WHERE id_employes=547;</code></li>
                    <br><br>
                    <li class="alert alert-warning">Afficher la date d'embauche d'Amandine : <code
                            class="alert alert-success">SELECT prenom, date_embauche FROM employes WHERE prenom='Amandine';</code>
                    </li><br><br>

                    <li class="alert alert-warning">Afficher le nombre de commerciaux : <code
                            class="alert alert-success">SELECT COUNT(*) AS 'nbr_commerciaux' FROM employes WHERE service ='commercial';</code>
                    </li><br><br>

                    <li class="alert alert-warning">Afficher le coût des commerciaux sur une année : <code
                            class="alert alert-success">SELECT SUM(salaire*12) AS 'salaire_annuel_commercial' FROM employes WHERE service='commercial'</code>
                        <br>
                        ou sans alias <br> <br>
                        <code
                            class="alert alert-success">SELECT SUM(salaire*12) FROM employes WHERE service='commercial'</code>
                    </li><br><br>

                    <li class="alert alert-warning">Afficher le salaire moyen par service : <code
                            class="alert alert-success">SELECT AVG(salaire) FROM employes GROUP BY service;</code> <br> <br> ou par service
                        
                          <code class="alert alert-success">SELECT AVG(salaire), service FROM employes GROUP BY service;</code>
                    </li><br><br>

                    <li class="alert alert-warning">Afficher le nombre de recrutement sur l'année 2010 : <br> <br> <code
                            class="alert alert-success">SELECT date_embauche, COUNT(*) AS 'nbr de recrutement 2010' FROM employes WHERE date_embauche BETWEEN <br> <br> '2010-01-01' AND '2010-12-31'; </code>GROUP BY date_embauche;
                        <br> <br> ou <br> <br>
                        <code
                            class="alert alert-success">SELECT COUNT(*) AS 'nbr de recrutement 2010' FROM employes WHERE date_embauche LIKE '2010%';</code>
                        <br> <br> ou <br> <br>
                        <code
                            class="alert alert-success">SELECT COUNT(*) as 'nb de recrutement' FROM employes WHERE date_embauche &gt;= '2010-01-01' AND date_embauche &lt;= '2010-12-31';</code>
                    </li> <br><br>

                    <li class="alert alert-warning">Augmenter le salaire pour chaque employé de 100€ : <code
                            class="alert alert-success">UPDATE employes SET salaire=salaire+100;</code></li><br><br>

                    <li class="alert alert-warning">Afficher le nombre de service : <br> <br>
                        <code
                            class="alert alert-success">SELECT COUNT(DISTINCT service) AS 'nombre de services' FROM employes;</code>
                    </li><br><br>

                    <li class="alert alert-warning">Afficher les informations de l'employé du service commercial gagnant
                        le salaire le plus élevé : <br><br>
                        <code class="alert alert-success">
                         SELECT * FROM employes WHERE service ='commercial' AND salaire= (SELECT MAX(salaire) FROM employes WHERE service='commercial');</code> <br> <br>
                         ou bien <br> <br> <code class="alert alert-success">SELECT * FROM employes WHERE service='commercial' ORDER BY salaire  DESC LIMIT 1;</code>
                    </li>
                    <br><br>

                    <li class="alert alert-warning">Afficher l'employé ayant été embauché en dernier : <code
                            class="alert alert-success">
                       SELECT * FROM employes WHERE date_embauche=(SELECT MAX(date_embauche) FROM employes);
                   </code> <br> <br> ou bien :
                   <code class="alert alert-success">SELECT * FROM employes ORDER BY date_embauche DESC LIMIT 1;</code>
                </li>
                </ul>
            </div>

        </div><!-- fin de la rangée -->
        <!-- fin rangée  -->
    </section>
    <!-- fin container  -->
    <!-- Optional JavaScript -->
    <!-- Bootstrap Bundle with Popper -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
        crossorigin="anonymous"></script>
</body>

</html>